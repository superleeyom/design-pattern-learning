## 抽象工厂模式

### 类图

![抽象工厂模式](http://image.leeyom.top/blog/20200802170537.png)

### 定义

- 为创建一组相关或相互依赖的对象提供一个接口，而且无须指定它们的具体类。
- 抽象工厂模式是工厂方法模式的升级版本，在有多个业务品种、业务分类时，通过抽象工厂模式产生需要的对象是一种非常好的解决方式。

### 优点

- 封装性，每个产品的实现类不是高层模块要关心的，它要关心的是什么？是接口，是抽象，它不关心对象是如何创建出来，这由谁负责呢？工厂类，只要知道工厂类是谁，我就能创建出一个需要的对象，省时省力，优秀设计就应该如此。

### 缺点

- 抽象工厂模式的最大缺点就是产品族扩展非常困难，为什么这么说呢？比如在示例中，如果要扩展一个棕色人种，抽象类 HumanFactory 就只要增加一个 createBrownHuman()，然后 FemaleFactory 和 MaleFactory 两个实现类都要修改，已经违反了开闭原则。
- 在抽象工厂模式的缺点中，我们提到抽象工厂模式的产品族扩展比较困难，但是一定要清楚，是产品族扩展困难，而不是产品等级。换句话说，**就是横向扩展容易，纵向扩展困难**。比如以人类为示例中，人的性别有男、女两个性别，但是我们现实生活中，有一种双性人，我们就可以很容易扩展，只需要增加三个产品类，分别对应不同的肤色，然后再创建一个工厂类，专门负责不同肤色人的双性人的创建任务，完全通过扩展来实现需求的变更，从这一点上看，抽象工厂模式是符合开闭原则的。

### 使用场景

抽象工厂模式的使用场景定义非常简单：**一个对象族（或是一组没有任何关系的对象）都有相同的约束，则可以使用抽象工厂模式**。什么意思呢？例如一个文本编辑器和一个图片处理器，都是软件实体，但是Linux下的文本编辑器和Windows下的文本编辑器虽然功能和界面都相同，但是代码实现是不同的，图片处理器也有类似情况。也就是具有了共同的约束条件：操作系统类型。于是我们可以使用抽象工厂模式，产生不同操作系统下的编辑器和图片处理器。